[2023-07-12 15:29:32.205 +01:00  INF]  User profile is available. Using 'C:\Users\olajumoke.owolabi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2023-07-12 15:29:32.545 +01:00  INF]  Application started. Press Ctrl+C to shut down.
[2023-07-12 15:29:32.545 +01:00  INF]  Hosting environment: Development
[2023-07-12 15:29:32.545 +01:00  INF]  Content root path: C:\Users\olajumoke.owolabi\source\repos\hrms-be-backend\Com.XpressPayments.Api\
[2023-07-12 15:29:32.626 +01:00  INF]  Request starting HTTP/2 GET https://localhost:44317/index.html - -
[2023-07-12 15:29:33.405 +01:00  INF]  Request starting HTTP/2 GET https://localhost:44317/_framework/aspnetcore-browser-refresh.js - -
[2023-07-12 15:29:33.406 +01:00  INF]  Request finished HTTP/2 GET https://localhost:44317/index.html - - - 200 - text/html;charset=utf-8 780.9144ms
[2023-07-12 15:29:33.445 +01:00  INF]  Request finished HTTP/2 GET https://localhost:44317/_framework/aspnetcore-browser-refresh.js - - - 200 12014 application/javascript;+charset=utf-8 31.9750ms
[2023-07-12 15:29:33.480 +01:00  INF]  Request starting HTTP/2 GET https://localhost:44317/_vs/browserLink - -
[2023-07-12 15:29:33.584 +01:00  INF]  Request finished HTTP/2 GET https://localhost:44317/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 104.4769ms
[2023-07-12 15:29:33.693 +01:00  INF]  Request starting HTTP/2 GET https://localhost:44317/swagger/v1/swagger.json - -
[2023-07-12 15:29:33.972 +01:00  INF]  Request finished HTTP/2 GET https://localhost:44317/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 278.9127ms
[2023-07-12 15:30:17.856 +01:00  INF]  Request starting HTTP/2 POST https://localhost:44317/api/Auth/ApproveUser application/json 42
[2023-07-12 15:30:17.901 +01:00  INF]  CORS policy execution successful.
[2023-07-12 15:30:19.095 +01:00  INF]  Successfully validated the token.
[2023-07-12 15:30:19.131 +01:00  INF]  Executing endpoint 'Com.XpressPayments.Api.Controllers.AuthController.ApproveUser (Com.XpressPayments.Api)'
[2023-07-12 15:30:19.217 +01:00  INF]  Route matched with {action = "ApproveUser", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveUser(Com.XpressPayments.Data.DTOs.Account.ApproveUserDto) on controller Com.XpressPayments.Api.Controllers.AuthController (Com.XpressPayments.Api).
[2023-07-12 15:32:27.685 +01:00  INF]  User with email: jane@blondmail.com approved successfully.
[2023-07-12 15:32:29.470 +01:00  INF]  Activation Email for jane@blondmail.com with Message==> <!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <style type="text/css">
        @media screen {
            @font-face {
                font-family: 'Lato';
                font-style: normal;
                font-weight: 400;
                src: local('Lato Regular'), local('Lato-Regular'), url(https://fonts.gstatic.com/s/lato/v11/qIIYRU-oROkIk8vfvxw6QvesZW2xOQ-xsNqO47m55DA.woff) format('woff');
            }

            @font-face {
                font-family: 'Lato';
                font-style: normal;
                font-weight: 700;
                src: local('Lato Bold'), local('Lato-Bold'), url(https://fonts.gstatic.com/s/lato/v11/qdgUG4U09HnJwhYI-uK18wLUuEpTyoUstqEm5AMlJo4.woff) format('woff');
            }

            @font-face {
                font-family: 'Lato';
                font-style: italic;
                font-weight: 400;
                src: local('Lato Italic'), local('Lato-Italic'), url(https://fonts.gstatic.com/s/lato/v11/RYyZNoeFgb0l7W3Vu1aSWOvvDin1pK8aKteLpeZ5c0A.woff) format('woff');
            }

            @font-face {
                font-family: 'Lato';
                font-style: italic;
                font-weight: 700;
                src: local('Lato Bold Italic'), local('Lato-BoldItalic'), url(https://fonts.gstatic.com/s/lato/v11/HkF_qI1x_noxlxhrhMQYELO3LdcAZYWl9Si6vvxL-qU.woff) format('woff');
            }
        }

        /* CLIENT-SPECIFIC STYLES */
        body,
        table,
        td,
        a {
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
        }

        table,
        td {
            mso-table-lspace: 0pt;
            mso-table-rspace: 0pt;
        }

        img {
            -ms-interpolation-mode: bicubic;
        }

        /* RESET STYLES */
        img {
            border: 0;
            height: auto;
            line-height: 100%;
            outline: none;
            text-decoration: none;
        }

        table {
            border-collapse: collapse !important;
        }

        body {
            height: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
            width: 100% !important;
        }

        /* iOS BLUE LINKS */
        a[x-apple-data-detectors] {
            color: inherit !important;
            text-decoration: none !important;
            font-size: inherit !important;
            font-family: inherit !important;
            font-weight: inherit !important;
            line-height: inherit !important;
        }

        /* MOBILE STYLES */
        @media screen and (max-width:600px) {
            h1 {
                font-size: 32px !important;
                line-height: 32px !important;
            }
        }

        /* ANDROID CENTER FIX */
        div[style*="margin: 16px 0;"] {
            margin: 0 !important;
        }
    </style>
</head>

<body style="background-color: #f4f4f4; margin: 0 !important; padding: 0 !important;">
    <!-- HIDDEN PREHEADER TEXT -->
    <div style="display: none; font-size: 1px; color: #fefefe; line-height: 1px; font-family: 'Century Gothic'; max-height: 0px; max-width: 0px; opacity: 0; overflow: hidden;"> We're thrilled to have you here! Get ready to dive into your new account. </div>
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <!-- LOGO -->
        <tr>
            <td bgcolor="#FFA73B" align="center">
                <table border="0" cellpadding="0" cellspacing="0" width="100%" style="max-width: 600px;">
                    <tr>
                        <td align="center" valign="top" style="padding: 40px 10px 40px 10px;"> </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td bgcolor="#FFA73B" align="center" style="padding: 0px 10px 0px 10px;">
                <table border="0" cellpadding="0" cellspacing="0" width="100%" style="max-width: 600px;">
                    <tr>
                        <td bgcolor="#ffffff" align="center" valign="top" style="padding: 40px 20px 20px 20px; border-radius: 4px 4px 0px 0px; color: #111111; font-family: 'Lato', Helvetica, Arial, sans-serif; font-size: 48px; font-weight: 400; letter-spacing: 4px; line-height: 48px;">
                            <h1 style="font-size: 48px; font-weight: 400; margin: 2;">Welcome!</h1> <img src=" https://img.icons8.com/clouds/100/000000/handshake.png" width="125" height="120" style="display: block; border: 0px;" />
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td bgcolor="#f4f4f4" align="center" style="padding: 0px 10px 0px 10px;">
                <table border="0" cellpadding="0" cellspacing="0" width="100%" style="max-width: 600px;">
                    <tr>
                        <td bgcolor="#ffffff" align="left" style="padding: 20px 30px 10px 30px; color: #666666; font-family: 'Century Gothic'; font-size: 18px; font-weight: 400; line-height: 25px; ">
                            <p style="margin: 0;">Dear FDYGIOJP[,<p>Thanks for registering on our platform. Please click on the link below to activate your account.</p></p>
                        </td>
                    </tr>
                    <tr>
                        <td bgcolor="#ffffff" align="left">
                            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                                <tr>
                                    <td bgcolor="#ffffff" align="center" style="padding: 0px 30px 30px 30px;">
                                        <table border="0" cellspacing="0" cellpadding="0">
                                            <tr>
                                                <td align="center" style="border-radius: 3px;" bgcolor="#FFA73B"><a href=http://localhost:9801/change-password?k=Password123&a=jane@blondmail.com target="_blank" style="font-size: 20px; font-family: Helvetica, Arial, sans-serif; color: #ffffff; text-decoration: none; color: #ffffff; text-decoration: none; padding: 15px 25px; border-radius: 2px; border: 1px solid #FFA73B; display: inline-block;">Verify Account</a></td>
                                            </tr>
                                        </table>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr> <!-- COPY -->
                    <tr>
                        <td bgcolor="#ffffff" align="left" style="padding: 0px 30px 0px 30px; color: #666666; font-family: 'Century Gothic'; font-size: 18px; font-weight: 400; line-height: 25px;">
                            <p style="margin: 0;">If that doesn't work, copy and paste the following link in your browser:</p>
                        </td>
                    </tr> <!-- COPY -->
                    <tr>
                        <td bgcolor="#ffffff" align="left" style="padding: 20px 30px 20px 30px; color: #666666; font-family: 'Century Gothic'; font-size: 18px; font-weight: 400; line-height: 25px;">
                            <p style="margin: 0;"><a href="#" target="_blank" style="color: #FFA73B;">http://localhost:9801/change-password?k=Password123&a=jane@blondmail.com</a></p>
                        </td>
                    </tr>                   
                    <tr>
                        <td bgcolor="#ffffff" align="left" style="padding: 0px 30px 40px 30px; border-radius: 0px 0px 4px 4px; color: #666666; font-family: 'Century Gothic'; font-size: 18px; font-weight: 400; line-height: 25px;">
                            <p style="margin: 0;">Warm Regards,<br>  Xpress HRMS</p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>               
    </table>
</body>

</html>
[2023-07-12 15:32:35.096 +01:00  INF]  Executing OkObjectResult, writing value of type 'Com.XpressPayments.Data.GenericResponse.BaseResponse'.
[2023-07-12 15:32:35.108 +01:00  INF]  Executed action Com.XpressPayments.Api.Controllers.AuthController.ApproveUser (Com.XpressPayments.Api) in 135884.4987ms
[2023-07-12 15:32:35.114 +01:00  INF]  Executed endpoint 'Com.XpressPayments.Api.Controllers.AuthController.ApproveUser (Com.XpressPayments.Api)'
[2023-07-12 15:32:35.117 +01:00  INF]  Request finished HTTP/2 POST https://localhost:44317/api/Auth/ApproveUser application/json 42 - 200 - application/json;+charset=utf-8 137260.6177ms
[2023-07-12 15:49:50.566 +01:00  INF]  Request starting HTTP/2 GET https://localhost:44317/api/Employee/GetAllEmpPendingApproval?CompanyID=37 - -
[2023-07-12 15:49:50.600 +01:00  INF]  Successfully validated the token.
[2023-07-12 15:49:50.608 +01:00  INF]  Executing endpoint 'Com.XpressPayments.Api.Controllers.EmployeeController.GetAllEmpPendingApproval (Com.XpressPayments.Api)'
[2023-07-12 15:49:50.617 +01:00  INF]  Route matched with {action = "GetAllEmpPendingApproval", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEmpPendingApproval(Int64) on controller Com.XpressPayments.Api.Controllers.EmployeeController (Com.XpressPayments.Api).
[2023-07-12 15:50:08.993 +01:00  ERR]  MethodName: FindUser(string email) ===>A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - An established connection was aborted by the software in your host machine.)
[2023-07-12 15:50:09.067 +01:00  ERR]  Exception Occured: GetEmpPendingApproval(CompanyID) ==> A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: TCP Provider, error: 0 - An established connection was aborted by the software in your host machine.)
[2023-07-12 15:50:09.068 +01:00  INF]  Executing OkObjectResult, writing value of type 'Com.XpressPayments.Data.GenericResponse.BaseResponse'.
[2023-07-12 15:50:09.070 +01:00  INF]  Executed action Com.XpressPayments.Api.Controllers.EmployeeController.GetAllEmpPendingApproval (Com.XpressPayments.Api) in 18451.9928ms
[2023-07-12 15:50:09.070 +01:00  INF]  Executed endpoint 'Com.XpressPayments.Api.Controllers.EmployeeController.GetAllEmpPendingApproval (Com.XpressPayments.Api)'
[2023-07-12 15:50:09.070 +01:00  INF]  Request finished HTTP/2 GET https://localhost:44317/api/Employee/GetAllEmpPendingApproval?CompanyID=37 - - - 200 - application/json;+charset=utf-8 18504.8024ms
[2023-07-12 15:50:29.700 +01:00  INF]  Request starting HTTP/2 GET https://localhost:44317/api/Employee/GetAllEmpPendingApproval?CompanyID=37 - -
[2023-07-12 15:50:29.718 +01:00  INF]  Successfully validated the token.
[2023-07-12 15:50:29.719 +01:00  INF]  Executing endpoint 'Com.XpressPayments.Api.Controllers.EmployeeController.GetAllEmpPendingApproval (Com.XpressPayments.Api)'
[2023-07-12 15:50:29.719 +01:00  INF]  Route matched with {action = "GetAllEmpPendingApproval", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllEmpPendingApproval(Int64) on controller Com.XpressPayments.Api.Controllers.EmployeeController (Com.XpressPayments.Api).
[2023-07-12 15:50:37.444 +01:00  INF]  Executing OkObjectResult, writing value of type 'Com.XpressPayments.Data.GenericResponse.BaseResponse'.
[2023-07-12 15:50:37.581 +01:00  INF]  Executed action Com.XpressPayments.Api.Controllers.EmployeeController.GetAllEmpPendingApproval (Com.XpressPayments.Api) in 7861.3176ms
[2023-07-12 15:50:37.581 +01:00  INF]  Executed endpoint 'Com.XpressPayments.Api.Controllers.EmployeeController.GetAllEmpPendingApproval (Com.XpressPayments.Api)'
[2023-07-12 15:50:37.581 +01:00  INF]  Request finished HTTP/2 GET https://localhost:44317/api/Employee/GetAllEmpPendingApproval?CompanyID=37 - - - 200 - application/json;+charset=utf-8 7880.9591ms
[2023-07-12 15:53:32.536 +01:00  INF]  Request starting HTTP/2 POST https://localhost:44317/api/Employee/ApproveEmp application/json 40
[2023-07-12 15:53:32.536 +01:00  INF]  CORS policy execution successful.
[2023-07-12 15:53:32.537 +01:00  INF]  Successfully validated the token.
[2023-07-12 15:53:32.537 +01:00  INF]  Executing endpoint 'Com.XpressPayments.Api.Controllers.EmployeeController.ApproveEmp (Com.XpressPayments.Api)'
[2023-07-12 15:53:32.543 +01:00  INF]  Route matched with {action = "ApproveEmp", controller = "Employee"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ApproveEmp(Com.XpressPayments.Data.DTOs.ApproveEmp) on controller Com.XpressPayments.Api.Controllers.EmployeeController (Com.XpressPayments.Api).
[2023-07-12 15:54:55.205 +01:00  INF]  User with email: mu@blondmail.com approved successfully.
[2023-07-12 15:54:55.205 +01:00  INF]  Executing OkObjectResult, writing value of type 'Com.XpressPayments.Data.GenericResponse.BaseResponse'.
[2023-07-12 15:54:55.233 +01:00  INF]  Executed action Com.XpressPayments.Api.Controllers.EmployeeController.ApproveEmp (Com.XpressPayments.Api) in 82689.6057ms
[2023-07-12 15:54:55.233 +01:00  INF]  Executed endpoint 'Com.XpressPayments.Api.Controllers.EmployeeController.ApproveEmp (Com.XpressPayments.Api)'
[2023-07-12 15:54:55.233 +01:00  INF]  Request finished HTTP/2 POST https://localhost:44317/api/Employee/ApproveEmp application/json 40 - 200 - application/json;+charset=utf-8 82697.4230ms
[2023-07-12 16:08:40.119 +01:00  INF]  Request starting HTTP/2 GET https://localhost:44317/api/Country/GetAllCountries - -
[2023-07-12 16:08:40.124 +01:00  INF]  Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/07/2023 14:52:08', Current time: '12/07/2023 15:08:40'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwtToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateJWS(String token, TokenValidationParameters validationParameters, BaseConfiguration currentConfiguration, SecurityToken& signatureValidatedToken, ExceptionDispatchInfo& exceptionThrown)
--- End of stack trace from previous location ---
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, JwtSecurityToken outerToken, TokenValidationParameters validationParameters, SecurityToken& signatureValidatedToken)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleAuthenticateAsync()
[2023-07-12 16:08:40.305 +01:00  INF]  Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo: '12/07/2023 14:52:08', Current time: '12/07/2023 15:08:40'.
[2023-07-12 16:08:40.307 +01:00  INF]  Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
[2023-07-12 16:08:40.329 +01:00  INF]  AuthenticationScheme: Bearer was challenged.
[2023-07-12 16:08:40.335 +01:00  INF]  Request finished HTTP/2 GET https://localhost:44317/api/Country/GetAllCountries - - - 401 - - 215.7836ms
